!function(){function n(n,e,t,r,o,a,u){try{var s=n[a](u),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,o)}function e(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var u=e.apply(t,r);function s(e){n(u,o,a,s,c,"next",e)}function c(e){n(u,o,a,s,c,"throw",e)}s(void 0)}))}}function t(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,a=[],u=!0,s=!1;try{for(t=t.call(n);!(u=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);u=!0);}catch(n){s=!0,o=n}finally{try{u||null==t.return||t.return()}finally{if(s)throw o}}return a}}(n,e)||a(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function o(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=a(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,s=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return s=n.done,n},e:function(n){c=!0,u=n},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw u}}}}function a(n,e){if(n){if("string"==typeof n)return u(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(n,e):void 0}}function u(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function s(n,e,a){var u=[];console.log(n),console.log(n.length);for(var s=!0,c=[],i=0;i<n.length;i++){var l,p=[],h=o(e);try{for(h.s();!(l=h.n()).done;){var f=l.value;if(Array.isArray(n[i][f]))p.push(n[i][f].toString());else if("object"===r(n[i][f])&&null!==n[i][f]){console.log(n[i][f]);for(var d=0,g=Object.entries(n[i][f]);d<g.length;d++){var m=t(g[d],2),y=m[0],v=m[1];s&&c.push(y),p.push(v)}}else p.push(n[i][f])}}catch(n){h.e(n)}finally{h.f()}s=!1,u.push(p)}return a&&(s||(console.log(c),e=(e=e.concat(c)).filter((function(n){return"predict"!==n}))),console.log(e),u.unshift(e)),console.log(u),u}function c(n,e){var t,r,o=[];for(t=0,r=-1;t<n.length;t++)t%e==0&&(o[++r]=[]),o[r].push(n[t]),console.log(o);return o}function i(n,e){return parseInt(n)==n?parseInt(n):e}function l(n,e){return parseFloat(n)==n?parseFloat(n):e}function p(){return(p=e(regeneratorRuntime.mark((function n(e,t,r,o,a){var u,s,i,l,p,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===o&&(o=5),null===a&&(a="default"),console.log(r),u=r.flat(),console.log(u),(s=new Headers).append("Auth",e),s.append("Content-Type","application/json"),s.append("environment",a),i=JSON.stringify(u),l={method:"PUT",headers:s,body:i},p=[],n.next=14,fetch("https://mycelia.azure-api.net/similar/id/"+t+"?top_k="+o,l).then((function(n){return n.json()})).then((function(n){console.log(n),n.similarity.forEach((function(n){n.results.forEach((function(n){console.log(n.id),p.push(n.id)}))}))})).catch((function(n){return console.log("error",n)}));case 14:return console.log(p),h=c(p,o),console.log(h),n.abrupt("return",h);case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(){return(h=e(regeneratorRuntime.mark((function n(e,t,r,o,a){var u,s,l,p,h,f,d,g,m,y;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(null===o&&(o=5),null===a&&(a="default"),console.log(r),(u=new Headers).append("Auth",e),u.append("Content-Type","application/json"),u.append("environment",a),s=[],l=0;l<r.length;l++)if(l>0){for(p={},h=0;h<r[0].length;h++)console.log(r[l][h]),f=i(r[l][h],r[l][h]),p[r[0][h]]=f;s.push(p)}return console.log(s),d=JSON.stringify(s),console.log(d),g={method:"PUT",headers:u,body:d},m=[],n.next=16,fetch("https://mycelia.azure-api.net/similar/data/"+t+"?top_k="+o,g).then((function(n){return n.json()})).then((function(n){console.log(n),n.similarity.forEach((function(n){n.results.forEach((function(n){console.log(n.id),m.push(n.id)}))}))})).catch((function(n){return console.log("error",n)}));case 16:return console.log(m),y=c(m,o),console.log(y),n.abrupt("return",y);case 20:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(){return(f=e(regeneratorRuntime.mark((function n(e,t,r,o,a){var u,s,i,l,p,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===o&&(o=5),null===a&&(a="default"),console.log(r),u=r.flat(),console.log(u),(s=new Headers).append("Auth",e),s.append("Content-Type","application/json"),s.append("environment",a),i=JSON.stringify(u),l={method:"PUT",headers:s,body:i},p=[],n.next=14,fetch("https://mycelia.azure-api.net/recommendation/id/"+t+"?top_k="+o,l).then((function(n){return n.json()})).then((function(n){console.log(n),n.recommendation.forEach((function(n){n.results.forEach((function(n){console.log(n.id),p.push(n.id)}))}))})).catch((function(n){return console.log("error",n)}));case 14:return console.log(p),h=c(p,o),console.log(h),n.abrupt("return",h);case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){return(d=e(regeneratorRuntime.mark((function n(e,r,o,a,u,c,l){var p,h,f,d,g,m,y,v,b,S,w,T,_,j,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(null===a&&(a=!1),null===u&&(u=!1),null===c&&(c=!1),null===l&&(l="default"),console.log(o),(p=new Headers).append("Auth",e),p.append("Content-Type","application/json"),p.append("environment",l),h=0;h<o[0].length;h++)o[h];for(f=[],d=0;d<o.length;d++)if(d>0){for(g={},m=0;m<o[0].length;m++)console.log(o[d][m]),y=i(o[d][m],o[d][m]),g[o[0][m]]=y;f.push(g)}return console.log(f),v=JSON.stringify(f),console.log(v),b={method:"PUT",headers:p,body:v},n.next=19,fetch("https://mycelia.azure-api.net/predict/"+r+"?predict_proba="+a.toString(),b).then((function(n){return n.json()})).catch((function(n){return console.log("error",n)}));case 19:for(pred_response=n.sent,S=[],w=0,T=Object.entries(pred_response[0]);w<T.length;w++)_=t(T[w],2),j=_[0],_[1],(c||"id"!=j)&&S.push(j);return x=s(pred_response,S,u),n.abrupt("return",x);case 24:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function g(){return(g=e(regeneratorRuntime.mark((function n(e,t,r){var o,a,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===r&&(r="default"),(o=new Headers).append("Auth",e),o.append("Content-Type","application/json"),o.append("environment",r),a={method:"GET",headers:o},u=[],n.next=9,fetch("https://mycelia.azure-api.net/fields/"+t,a).then((function(n){return n.json()})).then((function(n){Object.keys(n).forEach((function(e,t){u.push([e,n[e]])}))})).catch((function(n){return console.log("error",n)}));case 9:return console.log(u),s=u[0].map((function(n,e){return u.map((function(n){return n[e]}))})),n.abrupt("return",s);case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function m(){return(m=e(regeneratorRuntime.mark((function n(e,t,r){var o,a,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===r&&(r="default"),(o=new Headers).append("Auth",e),o.append("Content-Type","application/json"),o.append("environment",r),a={method:"GET",headers:o},u=[],n.next=9,fetch("https://mycelia.azure-api.net/id/"+t+"?mode=complete",a).then((function(n){return n.json()})).then((function(n){console.log(n),u.push(n)})).catch((function(n){return console.log("error",n)}));case 9:return s=u[0].map((function(n,e){return u.map((function(n){return n[e]}))})),n.abrupt("return",s);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(){return(y=e(regeneratorRuntime.mark((function n(e,r){var o,a,u,c,i,l,p,h,f,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===r&&(r="default"),(o=new Headers).append("Auth",e),o.append("Content-Type","application/json"),o.append("environment",r),a={method:"GET",headers:o},u=[],n.next=9,fetch("https://mycelia.azure-api.net/info?mode=complete&get_size=true",a).then((function(n){return n.json()})).then((function(n){console.log(n),u.push(n)})).catch((function(n){return console.log("error",n)}));case 9:for(c=u[0][0],console.log(c),i=[],l=0,p=Object.entries(c);l<p.length;l++)h=t(p[l],2),f=h[0],h[1],i.push(f);return console.log(i),d=s(u[0],i,!0),console.log(d),n.abrupt("return",d);case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function v(){return(v=e(regeneratorRuntime.mark((function n(e,t,r){var o,a,u,s,c,i,l,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===r&&(r="default"),(o=new Headers).append("Auth",e),o.append("Content-Type","application/json"),o.append("environment",r),a={method:"GET",headers:o},u=[],n.next=9,fetch("https://mycelia.azure-api.net/status",a).then((function(n){return n.json()})).then((function(n){console.log(n),u.push(n)})).catch((function(n){return console.log("error",n)}));case 9:return s=[],console.log(u),u=u[0][t],console.log(u),(c=[]).push(u.Task),s.push(c),[].push(u.Status),s=u.Status,(i=[]).push(u.Description),s.push(i),(l=[]).push(u.CurrentStep),s.push(l),(p=[]).push(u.TotalSteps),s.push(p),console.log(s),n.abrupt("return",s);case 30:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(){return(b=e(regeneratorRuntime.mark((function n(e,t,r,o){var a,u,s,c,i,p,h,f,d,g,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(null===o&&(o="default"),(a=new Headers).append("Auth",e),a.append("Content-Type","application/json"),a.append("environment",o),u=[],s=0;s<r.length;s++)if(s>0){for(c={},i=0;i<r[0].length;i++)console.log(r[s][i]),p=l(r[s][i],r[s][i]),c[r[0][i]]=p;u.push(c)}return console.log(u),h=JSON.stringify(u),console.log(h),f={method:"POST",headers:a,body:h},d=[],n.next=14,fetch("https://mycelia.azure-api.net/data/"+t,f).then((function(n){return n.json()})).then((function(n){console.log(n),d.push(n)})).catch((function(n){return console.log("error",n)}));case 14:return(g={}).db_type="SelfSupervised",g.hyperparams={min_epochs:500,pretraining_ratio:.5,learning_rate:0,hidden_latent_dim:128},m=JSON.stringify(g),f.body=m,n.next=21,fetch("https://mycelia.azure-api.net/setup/"+t,f).then((function(n){return n.json()})).then((function(n){console.log(n),d.push(n)})).catch((function(n){return console.log("error",n)}));case 21:return n.abrupt("return",d);case 22:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function S(){return(S=e(regeneratorRuntime.mark((function n(e,t,r,o,a,u,s,c){var i,p,h,f,d,g,m,y,v,b,S,w;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(null===c&&(c="default"),(i=new Headers).append("Auth",e),i.append("Content-Type","application/json"),i.append("environment",c),null===u&&(u=!0),p="random",u&&(p="stratified"),null===s&&(s=.1),null===a&&(a=!1),h=[],f=0;f<r.length;f++)if(f>0){for(d={},g=0;g<r[0].length;g++)console.log(r[f][g]),m=l(r[f][g],r[f][g]),d[r[0][g]]=m;h.push(d)}return console.log(h),y=JSON.stringify(h),console.log(y),v={method:"DELETE",headers:i},b=[],n.next=19,fetch("https://mycelia.azure-api.net/data/"+t,v).then((function(n){return n.json()})).then((function(n){console.log(n),b.push(n)})).catch((function(n){return console.log("error",n)}));case 19:return v={method:"POST",headers:i,body:y},n.next=22,fetch("https://mycelia.azure-api.net/data/"+t,v).then((function(n){return n.json()})).then((function(n){console.log(n),b.push(n)})).catch((function(n){return console.log("error",n)}));case 22:return(S={}).db_type="Supervised",S.label={task:"metric_classification",label_name:o},S.split={type:p,split_column:o,test_size:s},S["cat_process "]={embedding_dim:64},S.hyperparams={min_epochs:500,pretraining_ratio:.1,learning_rate:3e-4},w=JSON.stringify(S),v.body=w,n.next=32,fetch("https://mycelia.azure-api.net/setup/"+t+"?overwrite="+a.toString(),v).then((function(n){return n.json()})).then((function(n){console.log(n),b.push(n)})).catch((function(n){return console.log("error",n)}));case 32:return n.abrupt("return","SETUP OK");case 33:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(){return(w=e(regeneratorRuntime.mark((function n(e,t,r,o,a,u,s){var c,i,p,h,f,d,g,m,y,v,b;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(null===s&&(s="default"),(c=new Headers).append("Auth",e),c.append("Content-Type","application/json"),c.append("environment",s),null===u&&(u=.1),null===a&&(a=!1),i=[],p=0;p<r.length;p++)if(p>0){for(h={},f=0;f<r[0].length;f++)console.log(r[p][f]),d=l(r[p][f],r[p][f]),h[r[0][f]]=d;i.push(h)}return console.log(i),g=JSON.stringify(i),console.log(g),m={method:"DELETE",headers:c},y=[],n.next=16,fetch("https://mycelia.azure-api.net/data/"+t,m).then((function(n){return n.json()})).then((function(n){console.log(n),y.push(n)})).catch((function(n){return console.log("error",n)}));case 16:return m={method:"POST",headers:c,body:g},n.next=19,fetch("https://mycelia.azure-api.net/data/"+t,m).then((function(n){return n.json()})).then((function(n){console.log(n),y.push(n)})).catch((function(n){return console.log("error",n)}));case 19:return(v={}).db_type="Supervised",v.label={task:"regression",label_name:o},v.split={test_size:u},v["cat_process "]={embedding_dim:64},v.hyperparams={min_epochs:500,learning_rate:3e-4,decoder_layer:"2L_BN",dropout_rate:0},b=JSON.stringify(v),m.body=b,n.next=29,fetch("https://mycelia.azure-api.net/setup/"+t+"?overwrite="+a.toString(),m).then((function(n){return n.json()})).then((function(n){console.log(n),y.push(n)})).catch((function(n){return console.log("error",n)}));case 29:return n.abrupt("return","SETUP OK");case 30:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function T(){return(T=e(regeneratorRuntime.mark((function n(e,t,r,o,a,u,s,c){var i,p,h,f,d,g,m,y,v,b,S;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(null===c&&(c="default"),(i=new Headers).append("Auth",e),i.append("Content-Type","application/json"),i.append("environment",c),null===s&&(s=.1),null===u&&(u=!1),p=[],h=0;h<r.length;h++)if(h>0){for(f={},d=0;d<r[0].length;d++)console.log(r[h][d]),g=l(r[h][d],r[h][d]),f[r[0][d]]=g;p.push(f)}return console.log(p),m=JSON.stringify(p),console.log(m),y={method:"DELETE",headers:i},v=[],n.next=16,fetch("https://mycelia.azure-api.net/data/"+t,y).then((function(n){return n.json()})).then((function(n){console.log(n),v.push(n)})).catch((function(n){return console.log("error",n)}));case 16:return y={method:"POST",headers:i,body:m},n.next=19,fetch("https://mycelia.azure-api.net/data/"+t,y).then((function(n){return n.json()})).then((function(n){console.log(n),v.push(n)})).catch((function(n){return console.log("error",n)}));case 19:return(b={}).db_type="Supervised",b.label={task:"regression",label_name:o,regression_scaler:"log1p+standard"},b.split={test_size:s,type:"sequential",split_column:a},b["cat_process "]={embedding_dim:64},b.hyperparams={min_epochs:500,learning_rate:3e-4,decoder_layer:"2L_BN",dropout_rate:0},S=JSON.stringify(b),y.body=S,n.next=29,fetch("https://mycelia.azure-api.net/setup/"+t+"?overwrite="+u.toString(),y).then((function(n){return n.json()})).then((function(n){console.log(n),v.push(n)})).catch((function(n){return console.log("error",n)}));case 29:return n.abrupt("return","SETUP OK");case 30:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function _(){return(_=e(regeneratorRuntime.mark((function n(e,t,r,o,a,u){var s,c,i,p,h,f,d,g,m,y,v,b;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(null===u&&(u="default"),(s=new Headers).append("Auth",e),s.append("Content-Type","application/json"),s.append("environment",u),null===o&&(o="sentence-transformers/all-mpnet-base-v2"),null===a&&(a=!1),c=[],i=0;i<r.length;i++)if(i>0){for(p={},h=0;h<r[0].length;h++)console.log(r[i][h]),f=l(r[i][h],r[i][h]),p[r[0][h]]=f;c.push(p)}return console.log(c),d=JSON.stringify(c),(g={}).dataSource="jozzacluster",g.database="jai",g.collection=t,g.documents=d,console.log(d),m={method:"DELETE",headers:s},y=[],n.next=21,fetch("https://mycelia.azure-api.net/data/"+t,m).then((function(n){return n.json()})).then((function(n){console.log(n),y.push(n)})).catch((function(n){return console.log("error",n)}));case 21:return m={method:"POST",headers:s,body:d},n.next=24,fetch("https://mycelia.azure-api.net/data/"+t,m).then((function(n){return n.json()})).then((function(n){console.log(n),y.push(n)})).catch((function(n){return console.log("error",n)}));case 24:return(v={}).db_type="Text",v.hyperparams={nlp_model:o},b=JSON.stringify(v),m.body=b,n.next=31,fetch("https://mycelia.azure-api.net/setup/"+t+"?overwrite="+a.toString(),m).then((function(n){return n.json()})).then((function(n){console.log(n),y.push(n)})).catch((function(n){return console.log("error",n)}));case 31:return n.abrupt("return","SETUP OK");case 32:case"end":return n.stop()}}),n)})))).apply(this,arguments)}CustomFunctions.associate("SIMILAR",(function(n,e,t,r,o){return p.apply(this,arguments)})),CustomFunctions.associate("SIMILARDATA",(function(n,e,t,r,o){return h.apply(this,arguments)})),CustomFunctions.associate("RECOMMEND",(function(n,e,t,r,o){return f.apply(this,arguments)})),CustomFunctions.associate("PREDICT",(function(n,e,t,r,o,a,u){return d.apply(this,arguments)})),CustomFunctions.associate("FIELDS",(function(n,e,t){return g.apply(this,arguments)})),CustomFunctions.associate("IDS",(function(n,e,t){return m.apply(this,arguments)})),CustomFunctions.associate("INFO",(function(n,e){return y.apply(this,arguments)})),CustomFunctions.associate("STATUS",(function(n,e,t){return v.apply(this,arguments)})),CustomFunctions.associate("FITTABLE",(function(n,e,t,r){return b.apply(this,arguments)})),CustomFunctions.associate("FITCLASSIFICATION",(function(n,e,t,r,o,a,u,s){return S.apply(this,arguments)})),CustomFunctions.associate("FITREGRESSION",(function(n,e,t,r,o,a,u){return w.apply(this,arguments)})),CustomFunctions.associate("FITFORECAST",(function(n,e,t,r,o,a,u,s){return T.apply(this,arguments)})),CustomFunctions.associate("FITTEXT",(function(n,e,t,r,o,a){return _.apply(this,arguments)}))}();
//# sourceMappingURL=functions.js.map